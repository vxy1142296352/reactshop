(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{276:function(e,a,t){"use strict";t.r(a);var s=t(16),r=t(17),n=t(20),i=t(18),c=t(19),o=t(0),d=t.n(o),l=t(75),m=t(139),u=t.n(m),h=t(68),p=t(71),v=t(79),E=t(54),f=t(8),N=t(63);t.n(N)()();var b=v.a,g=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(n.a)(this,Object(i.a)(a).call(this,e))).state={goods:[],token:f.a.getState().token.token,loading:!1,isaddress:!0},t}return Object(c.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.match.params.id?this.details():(E.a.error("\u9519\u8bef\u8bf7\u6c42",1500),this.props.history.push("/404"))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"details",value:function(){var e=this,a=this.props.match.params.id;Object(h.a)("order/detail",{id:a},"POST",function(a){e._isMounted&&(0===a.data.code?(a.data.data.logistics?e.setState({isaddress:!0,address:a.data.data.logistics.provinceStr+a.data.data.logistics.cityStr+a.data.data.logistics.areaStr+a.data.data.logistics.address,username:a.data.data.logistics.linkMan,mobile:a.data.data.logistics.mobile,trackingNumber:a.data.data.logistics.trackingNumber,shipperName:a.data.data.logistics.shipperName}):e.setState({isaddress:!1}),e.setState({orderNumber:a.data.data.orderInfo.orderNumber,statusStr:a.data.data.orderInfo.statusStr,amount:a.data.data.orderInfo.amount,amountReal:a.data.data.orderInfo.amountReal,amountLogistics:a.data.data.orderInfo.amountLogistics,goodsNumber:a.data.data.orderInfo.goodsNumber,goods:a.data.data.goods,isPay:a.data.data.orderInfo.isPay,ordertime:a.data.data.logs[0].dateAdd,status:a.data.data.orderInfo.status,orderId:a.data.data.orderInfo.id,loading:!0})):(E.a.error("\u9519\u8bef\u8bf7\u6c42",1500),e.props.history.replace("/404")))},e)}},{key:"qxorder",value:function(e){var a=e.currentTarget.getAttribute("data-id"),t=this;b.confirm({contentText:"\u786e\u5b9a\u8981\u53d6\u6d88\u8ba2\u5355\u5417\uff1f",onOk:function(){t.Aqorder(a)},onCancel:function(){}})}},{key:"Aqorder",value:function(e){var a=this;Object(h.a)("order/close",{orderId:e},"POST",function(e){0===e.data.code?(E.a.success("\u53d6\u6d88\u6210\u529f",1500),a.details()):E.a.error("\u53d6\u6d88\u5931\u8d25",1500)},a)}},{key:"saveshop",value:function(e){var a=e.currentTarget.getAttribute("data-id"),t=this;b.confirm({contentText:"\u786e\u5b9a\u8981\u786e\u8ba4\u8981\u6536\u8d27\u5417",onOk:function(){t.Saveshop(a)},onCancel:function(){}})}},{key:"Saveshop",value:function(e){var a=this;Object(h.a)("order/delivery",{orderId:e},"POST",function(e){0===e.data.code?(E.a.success("\u6536\u8d27\u6210\u529f",1500),a.details()):E.a.error("\u6536\u8d27\u5931\u8d25",1500)},a)}},{key:"orderdetailsbtn",value:function(e,a,t,s,r){switch(e){case 0:return d.a.createElement("div",{className:u.a.orderIdBtn},d.a.createElement("a",{href:"/#/paychose/onlinepay?orderid="+a+"accestoken?="+this.state.token},"\u53bb\u4ed8\u6b3e"),d.a.createElement("a",{href:"javascrit:","data-id":a,onClick:this.qxorder.bind(this)},"\u53d6\u6d88\u8ba2\u5355"));case 1:return d.a.createElement("div",{className:u.a.orderIdBtn},d.a.createElement("a",{href:"javascrit:",onClick:this.tipsgoods.bind(this)},"\u63d0\u9192\u53d1\u8d27"),d.a.createElement("a",{href:"#/user/aftersale?ordernumber="+t+"?id="+a},"\u552e\u540e\u670d\u52a1"));case 2:return d.a.createElement("div",{className:u.a.orderIdBtn},d.a.createElement("a",{href:"javascrit:","data-id":a,onClick:this.saveshop.bind(this)},"\u786e\u8ba4\u6536\u8d27"),d.a.createElement("a",{href:void 0!==s?"#/user/express?expressname="+r+"?id="+s:"javascrit:"},void 0!==s?"\u67e5\u770b\u7269\u6d41":"\u65e0\u9700\u7269\u6d41"),d.a.createElement("a",{href:"#/user/aftersale?ordernumber="+t+"?id="+a},"\u552e\u540e\u670d\u52a1"));case 3:return d.a.createElement("div",{className:u.a.orderIdBtn},d.a.createElement("a",{href:"#/user/evote?ordernumber="+t+"?id="+a},"\u8bc4\u4ef7\u5546\u54c1"),d.a.createElement("a",{href:"#/user/aftersale?ordernumber="+t+"?id="+a},"\u552e\u540e\u670d\u52a1"));default:return null}}},{key:"tipsgoods",value:function(){E.a.success("\u63d0\u9192\u53d1\u8d27\u6210\u529f",1500)}},{key:"goback",value:function(){window.history.go(-1)}},{key:"reFresh",value:function(){window.location.reload()}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"orderdetailsApp"},this.state.loading?null:d.a.createElement(p.a,null),d.a.createElement("header",{className:u.a.carheader},d.a.createElement("a",{href:"javascrit:",className:u.a.carback,onClick:function(){return e.goback()}}),"\u8ba2\u5355\u8be6\u60c5",d.a.createElement("span",{className:u.a.caredite,onClick:this.reFresh.bind(this)},"\u5237\u65b0")),d.a.createElement("div",{className:u.a.container+" reactApp"},d.a.createElement("div",{className:u.a.orderListContent},d.a.createElement("div",{className:u.a.choseAddress},d.a.createElement("span",{className:u.a.addtips},"\u914d\u9001\u5730\u5740"),this.state.isaddress?d.a.createElement("div",{className:u.a.chosecon},d.a.createElement("div",{className:u.a.addname},this.state.username,d.a.createElement("span",null,this.state.mobile)),d.a.createElement("p",null,this.state.address)):d.a.createElement("div",{className:u.a.chosecon},d.a.createElement("p",null,"\u65e0\u9700\u914d\u9001\u5730\u5740"))),d.a.createElement("div",{className:u.a.carlist},d.a.createElement("div",{className:u.a.userorderTOPbOX},d.a.createElement("span",null,"\u8ba2\u5355\u53f7:",this.state.orderNumber),d.a.createElement("div",{className:u.a.orderdist},"\u72b6\u6001:",d.a.createElement("span",null,this.state.statusStr))),d.a.createElement("ul",null,this.state.goods.map(function(e,a){return d.a.createElement("li",{key:a},d.a.createElement("div",{className:u.a.carimg},d.a.createElement("a",{href:"/"},d.a.createElement("img",{src:e.pic,alt:""}))),d.a.createElement("div",{className:u.a.carname},d.a.createElement("a",{href:"#/details/"+e.goodsId},d.a.createElement("h2",null,e.goodsName),d.a.createElement("span",null,"\u89c4\u683c:",e.property,d.a.createElement("em",null,"x",e.number))),d.a.createElement("span",{className:u.a.carprice},"\xa5",e.amount)))})),d.a.createElement("div",{className:u.a.orderIDbottom},"\u5171",d.a.createElement("span",null,this.state.goodsNumber),"\u4ef6\u5546\u54c1 \u5408\u8ba1",d.a.createElement("span",null,"\uffe5",this.state.amountReal)),d.a.createElement("div",{className:u.a.orderContent},d.a.createElement("div",{className:u.a.contentitem},"\u4e0b\u5355\u65e5\u671f:",d.a.createElement("span",null,this.state.ordertime)),d.a.createElement("div",{className:u.a.contentitem},"\u662f\u5426\u4ed8\u6b3e:",d.a.createElement("span",null,this.state.isPay?"\u5df2\u4ed8\u6b3e":"\u672a\u4ed8\u6b3e")),d.a.createElement("div",{className:u.a.contentitem},"\u8ba2\u5355\u91d1\u989d:",d.a.createElement("span",{className:u.a.price},"\uffe5",this.state.amount)),d.a.createElement("div",{className:u.a.contentitem},"\u8fd0\u8d39:",d.a.createElement("span",{className:u.a.price},"\uffe5",this.state.amountLogistics)),d.a.createElement("div",{className:u.a.contentitem},"\u5b9e\u9645\u652f\u4ed8\u91d1\u989d:",d.a.createElement("span",{className:u.a.price},"\uffe5",this.state.amountReal))),this.orderdetailsbtn(this.state.status,this.state.orderId,this.state.orderNumber,this.state.trackingNumber,this.state.shipperName)))))}}]),a}(o.Component);a.default=Object(l.a)(g)}}]);