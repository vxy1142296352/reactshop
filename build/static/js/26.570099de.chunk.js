(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{261:function(e,t,a){"use strict";a.r(t);var n=a(16),o=a(17),c=a(20),i=a(18),s=a(19),r=a(0),l=a.n(r),d=a(137),m=a.n(d),u=a(72),p=a(68),v=a(71),h=a(54),f=a(63);a.n(f)()();var E=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={content:"",evote:[],loading:!1},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this._ismonted=!0,this.getnews()}},{key:"componentWillUnmount",value:function(){this._ismonted=!1}},{key:"getnews",value:function(){var e=this,t=this.props.match.params.id;Object(u.a)("notice/detail",{params:{id:t}},"GET",function(a){e._ismonted&&(0===a.data.code?(e.setState({title:a.data.data.title,id:t,dateAdd:a.data.data.dateAdd,loading:!0}),document.getElementById("newsContent").innerHTML=a.data.data.content,e.getevote()):(h.a.error("\u8bf7\u6c42\u9519\u8bef",1500),e.props.history.replace("/404")))},e)}},{key:"getevote",value:function(){var e=this,t=this.props.match.params.id;Object(u.a)("comment/list",{params:{refId:t}},"GET",function(t){if(e._ismonted&&0===t.data.code){for(var a=0;a<t.data.data.length;a++)t.data.data[a].commentUserInfo||(t.data.data[a].commentUserInfo={},t.data.data[a].commentUserInfo.nick="\u533f\u540d\u7528\u6237");e.setState({evote:t.data.data})}},e)}},{key:"evote",value:function(e){this.setState({content:e.target.value})}},{key:"evotesub",value:function(){var e=this,t=this.state.content,a=this.state.id;""!==t?Object(p.a)("comment/add",{refId:a,type:"3",content:t},"POST",function(t){0===t.data.code&&(h.a.success("\u8bc4\u4ef7\u6210\u529f",1500),e.setState({content:""}),e.getevote())},e):h.a.warning("\u8bf7\u8f93\u5165\u8bc4\u4ef7\u5185\u5bb9",1500)}},{key:"goback",value:function(){this.props.history.goBack()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:m.a.newstentApp},this.state.loading?null:l.a.createElement(v.a,null),l.a.createElement("header",{className:m.a.carheader+" "+m.a.newsHeader},l.a.createElement("a",{href:"javascrit:",className:m.a.carback,onClick:function(){return e.goback()}}),"\u5feb\u62a5\u8be6\u60c5"),l.a.createElement("div",{className:m.a.container+" "+m.a.NewsContainer+" reactApp"},l.a.createElement("div",{className:m.a.newCent},l.a.createElement("h1",{className:m.a.title},this.state.title),l.a.createElement("p",{style:{fontSize:".32rem",color:"#999"}},this.state.dateAdd),l.a.createElement("div",{className:m.a.newBoxtent,id:"newsContent"})),l.a.createElement("div",{className:m.a.Hoteevote},l.a.createElement("div",{className:m.a.evotetitle},"\u70ed\u95e8\u8bc4\u8bba"),l.a.createElement("div",{className:m.a.evoteItems},l.a.createElement("ul",null,this.state.evote.map(function(e,t){return l.a.createElement("li",{key:t},l.a.createElement("div",{className:m.a.evoteuser},l.a.createElement("img",{src:a(87),alt:""}),l.a.createElement("p",null,l.a.createElement("em",null,e.commentUserInfo.nick)),l.a.createElement("span",null)),l.a.createElement("div",{className:m.a.evoteContetn},e.content))}),this.state.evote.length<=0?l.a.createElement("div",{className:m.a.Noshop},l.a.createElement("div",{className:m.a.Empty+" "+m.a.img3}),l.a.createElement("p",null,"\u6682\u65e0\u8bc4\u8bba")):null))),l.a.createElement("div",{className:m.a.messList},l.a.createElement("input",{type:"text",placeholder:"\u8bc4\u4ef7\u6587\u7ae0",onChange:this.evote.bind(this)}),l.a.createElement("button",{onClick:this.evotesub.bind(this)},"\u53d1\u8868"))))}}]),t}(r.Component);t.default=E},68:function(e,t,a){"use strict";var n=a(70),o=a.n(n),c=a(54),i=a(8),s=a(24),r=a(23),l=a.n(r);t.a=function(e,t,a,n,r){var d=l.a.load("accestoken");if(null===d||void 0===d)c.a.error("\u767b\u5f55\u8fc7\u671f",500),i.a.dispatch(Object(s.b)(null)),l.a.remove("accestoken"),setTimeout(function(){r.props.history.replace("/login?Redirect="+r.props.location.pathname)},501);else{i.a.dispatch(Object(s.b)(d));var m=window.location.origin+"/api/";if("GET"===a)o.a.get(m+e,{params:{token:d}},{timeout:1e4}).then(function(e){2e3===e.data.code?(c.a.error("\u767b\u5f55\u8fc7\u671f",500),i.a.dispatch(Object(s.b)(null)),l.a.remove("accestoken"),setTimeout(function(){r.props.history.replace("/login?Redirect="+r.props.location.pathname)},501)):3e3===e.data.code?c.a.error("\u8bf7\u6c42\u9519\u8bef",1500):n(e)}).catch(function(e){c.a.error("\u7f51\u7edc\u9519\u8bef",1500)});else if("POST"===a){var u=new URLSearchParams;for(var p in u.append("token",d),t)u.append(p,t[p]);o.a.post(m+e,u,{timeout:1e4}).then(function(e){2e3===e.data.code?(c.a.error("\u767b\u5f55\u8fc7\u671f",500),i.a.dispatch(Object(s.b)(null)),l.a.remove("accestoken"),setTimeout(function(){r.props.history.replace("/login?Redirect="+r.props.location.pathname)},501)):3e3===e.data.code?c.a.error("\u8bf7\u6c42\u9519\u8bef",1500):n(e)}).catch(function(e){c.a.error("\u7f51\u7edc\u9519\u8bef",1500)})}}}},87:function(e,t,a){e.exports=a.p+"static/media/28.7b18cad9.png"}}]);