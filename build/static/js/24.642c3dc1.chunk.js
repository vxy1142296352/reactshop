(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{259:function(e,t,a){"use strict";a.r(t);var i=a(16),r=a(17),n=a(20),s=a(18),c=a(19),o=a(21),l=a(0),d=a.n(l),h=a(136),u=a.n(h),m=a(72),p=a(71),v=a(90),g=a(63);a.n(g)()();var f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(n.a)(this,Object(s.a)(t).call(this,e))).refresh=function(e,t){setTimeout(function(){e()},2e3)},a.loadMore=function(e){var t=Object(o.a)(Object(o.a)(a));setTimeout(function(){e(t.setState({ismore:!1}))},2e3)},a.state={catename:"",prolist:[],loading:!1,active:[{active:!0},{active:!1},{active:!1},{active:!1}],price:"priceUp",ornumber:"ordersUp",ordertime:"addedUp",ismore:!0},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getlist("")}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getlist",value:function(e){var t=this,a={params:{}};a.params.orderBy=e,a.params.categoryId=this.props.match.params.id;var i="";i=0===Number(this.props.match.params.id)?"\u6240\u6709\u5546\u54c1":window.location.href.split("?name=")[1],t.setState({catename:i}),Object(m.a)("shop/goods/list",a,"GET",function(e){t._isMounted&&0===e.data.code?t.setState({prolist:e.data.data,loading:!0}):t.setState({prolist:[],loading:!0})})}},{key:"defaulist",value:function(e){var t=e.currentTarget.getAttribute("data-index");this.getlist(),this.deactive(t)}},{key:"changeprice",value:function(e){var t=e.currentTarget.getAttribute("data-index"),a=e.currentTarget.getAttribute("data-price");"priceUp"===a?this.setState({price:"priceDown"}):this.setState({price:"priceUp"}),this.deactive(t),this.getlist(a)}},{key:"changesale",value:function(e){var t=e.currentTarget.getAttribute("data-index"),a=e.currentTarget.getAttribute("data-ornumber");"ordersUp"===a?this.setState({ornumber:"ordersDown"}):this.setState({ornumber:"ordersUp"}),this.getlist(a),this.deactive(t)}},{key:"changetime",value:function(e){var t=e.currentTarget.getAttribute("data-index"),a=e.currentTarget.getAttribute("data-ordertime");"addedUp"===a?this.setState({ordertime:"addedDown"}):this.setState({ordertime:"addedUp"}),this.getlist(a),this.deactive(t)}},{key:"deactive",value:function(e){for(var t=this.state.active,a=0;a<t.length;a++)t[a].active=!1,t[e].active=!0;this.setState({active:t})}},{key:"goback",value:function(){this.props.history.goBack()}},{key:"render",value:function(){var e=this;if(0===this.state.prolist.length)var t=d.a.createElement("div",{className:u.a.Noshop},d.a.createElement("div",{className:u.a.Empty+" "+u.a.img3}),d.a.createElement("p",null,"\u6b64\u5206\u7c7b\u4e0b\u65e0\u5546\u54c1"));return d.a.createElement("div",{className:u.a.listApp+" view"},this.state.loading?null:d.a.createElement(p.a,null),d.a.createElement(v.a,{className:"main",onRefresh:this.refresh,onLoadMore:this.loadMore,hasMore:this.state.prolist.length>=4,ismore:this.state.ismore},d.a.createElement("header",{className:u.a.carheader},d.a.createElement("a",{href:"javascrit:",className:u.a.carback,onClick:function(){return e.goback()}}),decodeURI(this.state.catename)),d.a.createElement("div",{className:u.a.container+" reactApp"},this.state.prolist.length?d.a.createElement("div",{className:u.a.listdesc},d.a.createElement("a",{href:"javascrit:","data-index":"0",className:this.state.active[0].active?u.a.active:" ",onClick:this.defaulist.bind(this)},"\u7efc\u5408"),d.a.createElement("a",{href:"javascrit:",className:this.state.active[1].active?u.a.active:" ","data-price":this.state.price,"data-index":"1",onClick:this.changeprice.bind(this)},"\u4ef7\u683c",d.a.createElement("i",{className:"priceUp"===this.state.price?" ":u.a.check})),d.a.createElement("a",{href:"javascrit:",className:this.state.active[2].active?u.a.active:" ","data-ornumber":this.state.ornumber,"data-index":"2",onClick:this.changesale.bind(this)},"\u9500\u91cf",d.a.createElement("i",{className:"ordersUp"===this.state.ornumber?" ":u.a.check})),d.a.createElement("a",{href:"javascrit:",className:this.state.active[3].active?u.a.active:" ","data-ordertime":this.state.ordertime,"data-index":"3",onClick:this.changetime.bind(this)},"\u65b0\u54c1",d.a.createElement("i",{className:"addedUp"===this.state.ordertime?" ":u.a.check}))):null,d.a.createElement("div",{className:u.a.searchbox},d.a.createElement("ul",{className:u.a.indexProduct},this.state.prolist.map(function(e,t){return d.a.createElement("li",{key:t},d.a.createElement("a",{href:"#/details/"+e.id},d.a.createElement("div",{className:u.a.proIcon+" "+u.a.img2}),d.a.createElement("img",{src:e.pic,alt:e.characteristic}),d.a.createElement("h3",null,e.name),d.a.createElement("span",{className:u.a.price},"\xa5",e.minPrice,d.a.createElement("del",null,"\xa5",e.originalPrice))))})),t),d.a.createElement("div",{className:u.a.bottom}))))}}]),t}(l.Component);t.default=f},90:function(e,t,a){"use strict";var i=a(16),r=a(17),n=a(20),s=a(18),c=a(19),o=a(21),l=a(0),d=a.n(l),h={init:"",pulling:"pulling",enough:"pulling enough",refreshing:"refreshing",refreshed:"refreshed",reset:"reset",loading:"loading"};var u=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(a=Object(n.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={loaderState:h.init,pullHeight:0,progressed:0},a.touchStart=function(e){if(a.canRefresh()&&1===e.touches.length){var t=Object(o.a)(Object(o.a)(a)).panel;a.initialTouch={clientY:e.touches[0].clientY,scrollTop:t.scrollTop}}},a.touchMove=function(e){if(a.canRefresh()){var t=Object(o.a)(Object(o.a)(a)).panel,i=a.props.distanceToRefresh,r=t.scrollTop,n=a.calculateDistance(e.touches[0]);if(n>0&&r<=0){var s=n-a.initialTouch.scrollTop;s<0&&(s=0,a.initialTouch.scrollTop=n);var c=function(e){var t=e,a=window.screen.availHeight;return a/2.5*Math.sin(t/a*(Math.PI/2))+0}(s);c&&e.preventDefault(),a.setState({loaderState:c>i?h.enough:h.pulling,pullHeight:c})}}},a.touchEnd=function(){if(a.canRefresh()){var e={loaderState:h.reset,pullHeight:0};a.state.loaderState===h.enough?(a.setState({loaderState:h.refreshing,pullHeight:0}),a.props.onRefresh(function(){a.setState({loaderState:h.refreshed,pullHeight:0})},function(){a.setState(e)})):a.setState(e)}},a.loadMore=function(){a.setState({loaderState:h.loading}),a.props.onLoadMore(function(){a.setState({loaderState:h.init})})},a.scroll=function(e){if(a.props.autoLoadMore&&a.props.hasMore&&a.state.loaderState!==h.loading){var t=e.currentTarget;t.scrollHeight-t.clientHeight-t.scrollTop<5&&a.loadMore()}},a.animationEnd=function(){var e={};a.state.loaderState===h.refreshed&&(e.loaderState=h.init),a.props.initializing>1&&(e.progressed=1),a.setState(e)},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.initializing<2&&this.setState({progressed:0})}},{key:"setInitialTouch",value:function(e){this.initialTouch={clientY:e.clientY}}},{key:"componentDidMount",value:function(){}},{key:"calculateDistance",value:function(e){return e.clientY-this.initialTouch.clientY}},{key:"canRefresh",value:function(){var e=this.props.onRefresh,t=this.state.loaderState;return e&&[h.refreshing,h.loading].indexOf(t)<0}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,i=t.className,r=t.hasMore,n=t.initializing,s=t.ismore,c=this.state,o=c.loaderState,l=c.pullHeight,h=c.progressed,u=r?d.a.createElement("div",{className:"tloader-footer"},d.a.createElement("div",{className:s?"tloader-btn ":"tloader-btn tloader_nomore",onClick:this.loadMore}," ")," ",d.a.createElement("div",{className:"tloader-loading"}," ",d.a.createElement("i",{className:"ui-loading"})," ")," "):null,m=l?{WebkitTransform:"translate3d(0,".concat(l,"px,0)")}:null,p="";return h||(n>0&&(p+=" tloader-progress"),n>1&&(p+=" ed")),d.a.createElement("div",{ref:function(t){e.panel=t},className:"tloader state-".concat(o," ").concat(i).concat(p),onScroll:this.scroll,onTouchStart:this.touchStart,onTouchMove:this.touchMove,onTouchEnd:this.touchEnd,onAnimationEnd:this.animationEnd},d.a.createElement("div",{className:"tloader-symbol"},d.a.createElement("div",{className:"tloader-msg",ref:"loadMoreheight"}," ",d.a.createElement("i",null)," ")," ",d.a.createElement("div",{className:"tloader-loading"}," ",d.a.createElement("i",{className:"ui-loading"})," ")," ")," ",d.a.createElement("div",{className:"tloader-body",style:m}," ",a," ")," ",u," ")}}]),t}(d.a.Component);u.defaultProps={distanceToRefresh:60,autoLoadMore:1},t.a=u}}]);